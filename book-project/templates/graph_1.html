{% extends "_base.html" %}
{% load static %}
{% block title %}Humør vs Tid{% endblock %}
{% block content %}

<script src="https://www.gstatic.com/charts/loader.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
<script>
    let y_data; 
    y_data = "{{ happy }}"

    function reset_(){
        document.getElementById("sad").disabled = false;
        document.getElementById("happy").disabled = false;
        document.getElementById("neutral").disabled = false;
        document.getElementById("surprised").disabled = false;
        document.getElementById("fearful").disabled = false;
        document.getElementById("disgusted").disabled = false;
        document.getElementById("angry").disabled = false;
    }
    function happy(){
        y_data = "{{ happy }}"
        reset_()
        document.getElementById("happy").disabled = true;
        drawChart()
    }
    function angry(){
        y_data = "{{ angry }}"
        reset_()
        document.getElementById("angry").disabled = true;
        drawChart()
    }
    function neutral(){
        y_data = "{{ neutral }}"
        reset_()
        document.getElementById("neutral").disabled = true;
        drawChart()
    }
    function disgusted(){
        y_data = "{{ disgusted }}"
        reset_()
        document.getElementById("disgusted").disabled = true;
        drawChart()
    }
    function fearful(){
        y_data = "{{ fearful }}"
        reset_()
        document.getElementById("fearful").disabled = true;
        drawChart()
    }
    function sad(){
        y_data = "{{ sad }}"
        reset_()
        document.getElementById("sad").disabled = true;
        drawChart()
    }
    function surprised(){
        y_data = "{{ surprised }}"
        reset_()
        document.getElementById("surprised").disabled = true;
        drawChart()
    }


    google.charts.load('current',{packages:['corechart']});
    google.charts.setOnLoadCallback(drawChart);

    function drawChart() {
        // Set Data
        x = JSON.parse("{{ x }}")
        console.log(x)
        y = JSON.parse(y_data)
        var c = x.map(function(e, i) {
                return [e, y[i]];
            });
        
        var data = new google.visualization.DataTable();
        data.addColumn('timeofday', 'Klokkeslæt');
        data.addColumn('number', 'Andel obververet');
        data.addRows(c)
        // Set Options
        var options = {
            backgroundColor: {
                        fill: 'black',
                        fillOpacity: 0
            },
            pointSize: 5,
            titleTextStyle : {
                        color: '#FFF',
                        fontSize: 30 // or the number you want
                    },
            hAxis: {title: 'Klokkeslæt', format: 'HH:mm', gridlines: {
color: 'transparent'
}, textStyle : {
                        color: '#FFF',
                        fontSize: 18 // or the number you want
                    }, titleTextStyle : {
                        color: '#FFF',
                        fontSize: 18 // or the number you want
                    }},
            vAxis: {title: 'Andel Observeret', ticks: [0.0,0.2,0.4,0.6,0.8,1.0], textStyle : {
                        color: '#FFF',
                        fontSize: 18 // or the number you want
                    },  titleTextStyle : {
                        color: '#FFF',
                        fontSize: 18, // or the number you want,
                         
                    },
                },
            legend: 'none',
            colors: ['blue'],
            
        };
        // Draw Chart
        var chart = new google.visualization.LineChart(document.getElementById('chart'));
        chart.draw(data, options);
    }
</script>
<style>
    .pad{
        padding-left: 3vw;
        padding-right: 3vw;
    }
</style>
<div class="container justify-content-center">
    <div id="chart" style="height: 70vh; width: auto;"></div>  
    <div style="text-align: center;">
        <div class="btn-group" style="padding-top: 5vh;">
            <button class="btn btn-outline-light btn-lg pad disabled_" id="happy" data-mdb-ripple-color="dark" onclick="happy()" disabled>Happy </button>
            <button class="btn btn-outline-light btn-lg pad disabled_" id="sad" data-mdb-ripple-color="dark" onclick="sad()">Sad </button>
            <button class="btn btn-outline-light btn-lg pad disabled_" id="angry" data-mdb-ripple-color="dark" onclick="angry()">Angry </button>
            <button class="btn btn-outline-light btn-lg pad disabled_" id="surprised" data-mdb-ripple-color="dark" onclick="surprised()">Surprised </button>
            <button class="btn btn-outline-light btn-lg pad disabled_" id="disgusted" data-mdb-ripple-color="dark" onclick="disgusted()">Disgusted </button>
            <button class="btn btn-outline-light btn-lg pad disabled_" id="fearful" data-mdb-ripple-color="dark" onclick="fearful()">Fearful </button>
            <button class="btn btn-outline-light btn-lg pad disabled_" id="neutral" data-mdb-ripple-color="dark" onclick="neutral()">Neutral </button>
        </div>
    </div>
</div>

{% endblock content %}
{% block footer %}
    <!-- footer when size >= large -->
    <nav class="py-3 d-none d-lg-block bg-light">
        <div class="container">
            <div class="d-flex text-center justify-content-between flex-row">
                <a href="https://dataekspeditioner.dk/"><img src="{% static 'img/dataekspeditioner_sort.png' %}" class="pt-4 pb-5 pb-md-0" width="240" alt="dataekspeditioner-logo"></a>
                <a href="https://ku.dk"><img src="{% static 'img/ku_logo_dk_hh-300x112.png' %}" class="px-5"  width="310"  alt="Københavns Universitet"></a>
                <a href="https://novonordiskfonden.dk/da/"><img src="{% static 'img/NNF_blue_RGB_solid.png' %}" class="pt-1 pr-3" width="110" alt="Novo Nordisk Fonden"></a> 
            </div>
        </div>
    </nav>

    <!-- footer when small <= size < largen -->
    <div class="d-none d-sm-block d-lg-none">
        <nav class="py-4 px-sm-5 bg-light">
            <div class="d-flex justify-content-between flex-row bg-light">
                <a href="https://dataekspeditioner.dk/"><img src="{% static 'img/dataekspeditioner_sort.png' %}" class="pt-3 pl-3" width="150" alt="dataekspeditioner-logo"></a>
                <a href="https://ku.dk"><img src="{% static 'img/ku_logo_dk_hh-300x112.png' %}" class="px-2" width="150"  alt="Københavns Universitet"></a>
                <a href="https://novonordiskfonden.dk/da/"><img src="{% static 'img/NNF_blue_RGB_solid.png' %}" class="pr-3" width="80" alt="Novo Nordisk Fonden"></a> 
            </div>
        </nav>  
    </div>

    <!-- footer when size < small -->
    <div class="d-sm-none">
        <nav class="py-4 px-sm-5 bg-light">
            <div class="d-flex justify-content-between flex-row bg-light">
                <a href="https://dataekspeditioner.dk/"><img src="{% static 'img/dataekspeditioner_sort.png' %}" class="pt-2 pl-2" width="130" alt="dataekspeditioner-logo"></a>
                <a href="https://ku.dk"><img src="{% static 'img/ku_logo_dk_hh-300x112.png' %}" class="px-2" width="120"  alt="Københavns Universitet"></a>
                <a href="https://novonordiskfonden.dk/da/"><img src="{% static 'img/NNF_blue_RGB_solid.png' %}" class="pr-3" width="70" alt="Novo Nordisk Fonden"></a> 
            </div>
        </nav>  
    </div>

{% endblock footer %}