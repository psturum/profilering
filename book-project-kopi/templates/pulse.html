<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<link rel="shortcut icon" type="image/ico" href="/static/img/favicon.ico">

<!-- Google Tag Manager -->
<script>
  (function(w, d, s, l, i) {
    w[l] = w[l] || [];
    w[l].push({
      'gtm.start': new Date().getTime(),
      event: 'gtm.js'
    });
    var f = d.getElementsByTagName(s)[0],
      j = d.createElement(s),
      dl = l != 'dataLayer' ? '&l=' + l : '';
    j.async = true;
    j.src =
      'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
    f.parentNode.insertBefore(j, f);
  })(window, document, 'script', 'dataLayer', 'GTM-K9LV62T');
</script>
<!-- End Google Tag Manager -->

<meta property="og:title" content="EZ-MMLA Toolkit">
<meta property="og:image" content="/static/img/social-preview.png">
<meta name="twitter:card" content="summary_large_image">
<meta property="twitter:title" content="EZ-MMLA Toolkit">
<meta name="twitter:image" content="/static/img/social-preview.png">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.css" integrity="sha256-Nfu23DiRqsrx/6B6vsI0T9vEVKq1M6KgO8+TV363g3s=" crossorigin="anonymous" />
<link rel="stylesheet" href="/static/pulse/css/global.css" />
  <title>EZ-MMLA Toolkit: Pulse</title>
  <link rel="stylesheet" href="/static/pulse/css/tools-run.css" />
  <link rel="stylesheet" href="/static/pulse/css/documentation.css" />
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.7.7/dat.gui.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/stats.js@0.17.0/build/stats.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.5.0/Chart.min.js"></script>
  
<link type="text/css" rel="stylesheet" href="/static/pulse/css/heartrate.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.3.0/socket.io.js" integrity="sha512-v8ng/uGxkge3d1IJuEo6dJP8JViyvms0cly9pnbfRxT6/31c3dRWxIiwGnMSWwZjHKOuY3EVmijs7k1jz/9bLA==" crossorigin="anonymous"></script>
<script src="/static/pulse/js/tools/pulse/jquery-1.10.2.min.js"></script>
<script src="/static/pulse/js/tools/pulse/animate.js"></script>
<script src="/static/pulse/js/tools/pulse/underscore-min.js"></script>
<script src="/static/pulse/js/tools/pulse/d3.min.js"></script>
<script src="/static/pulse/js/tools/pulse/rickshaw.min.js"></script>
<script src="/static/pulse/js/tools/pulse/websocket.js"></script>
<script src="/static/pulse/js/tools/pulse/mathmatical.js"></script>
<script src="/static/pulse/js/tools/pulse/camera.js"></script>
<script src="/static/pulse/js/tools/pulse/upload.js"></script>
<script src="/static/pulse/js/tools/pulse/headtrackr.js"></script>
<script src="/static/pulse/js/tools/pulse/dsp.js"></script>

<style>
  div#main {
    align-items: center !important;
  }
</style>

</head>

<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K9LV62T"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  

  <div style="position: fixed;display: flex;flex-direction: column;height: 100%;width: 100%;">
    <header id="header">
      <div class="top-nav" style="padding: 10px 20px;">
        
        <a class="logo-site-link" title="back" href="..">
        
          <svg style="transform: rotate(180deg);" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="18px" viewBox="0 0 492.004 492.004" xml:space="preserve">
            <g>
              <path style="fill: var(--grey-medium);" d="M484.14,226.886L306.46,49.202c-5.072-5.072-11.832-7.856-19.04-7.856c-7.216,0-13.972,2.788-19.044,7.856l-16.132,16.136
                c-5.068,5.064-7.86,11.828-7.86,19.04c0,7.208,2.792,14.2,7.86,19.264L355.9,207.526H26.58C11.732,207.526,0,219.15,0,234.002
                v22.812c0,14.852,11.732,27.648,26.58,27.648h330.496L252.248,388.926c-5.068,5.072-7.86,11.652-7.86,18.864
                c0,7.204,2.792,13.88,7.86,18.948l16.132,16.084c5.072,5.072,11.828,7.836,19.044,7.836c7.208,0,13.968-2.8,19.04-7.872
                l177.68-177.68c5.084-5.088,7.88-11.88,7.86-19.1C492.02,238.762,489.228,231.966,484.14,226.886z"/>
            </g>
          </svg>
        </a>
        <div class="title-container">
          <h1 class="tool-title">Pulse</h1>
          <p class="tool-caption">Heart Rate Detection</p>
        </div>
        <div></div>
      </div>
    </header>

    <div style="display: flex;flex-direction: row;width: 100%;height: calc(100vh - 60px);">
      <div id="sidebar" class="sidebar">
        <button id="settings-button" class="settings-button" title="settings">
          <svg xmlns="http://www.w3.org/2000/svg" width="18px" viewBox="0 0 48.753 48.877">
            <g id="settings" transform="translate(-0.373 -0.001)">
              <path style="fill: inherit;" data-name="Path 49" d="M140.938,23.431a4.058,4.058,0,0,1,4.7.739l1.645-1.645a11.59,11.59,0,0,0,15.279-12.8,1.056,1.056,0,0,0-1.788-.578l-2.443,2.443a5.095,5.095,0,1,1-7.205-7.205l2.443-2.443a1.055,1.055,0,0,0-.578-1.788,11.587,11.587,0,0,0-12.732,15.46l-3.569,3.569Z" transform="translate(-113.585 0)" fill="#627173"/>
              <path style="fill: inherit;" data-name="Path 50" d="M20.85,158.144l-4.233-4.233-14.8,14.8a4.928,4.928,0,0,0,6.969,6.969l12.759-12.759A4.058,4.058,0,0,1,20.85,158.144Z" transform="translate(0 -128.246)" fill="#627173"/>
              <path style="fill: inherit;" data-name="Path 51" d="M30.507,40.825a1.55,1.55,0,0,0-2.192,0l-.884.884L11.692,25.969l.736-.736a1.551,1.551,0,0,0-.177-2.344L5.829,18.16a1.55,1.55,0,0,0-2.015.152L1.087,21.039a1.55,1.55,0,0,0-.152,2.015l4.729,6.422a1.55,1.55,0,0,0,2.344.177l.736-.736L24.483,44.656l-.946.946a1.55,1.55,0,0,0,0,2.192l14.52,14.52a4.928,4.928,0,0,0,6.969-6.969Z" transform="translate(-0.217 -14.879)" fill="#627173"/>
            </g>
          </svg>
        </button>
        <div id="sidebar-content" class="sidebar-content">
          <div class="text-container">
            <h3>Settings</h3>
            <p>
               Configure the model parameters or change the output view. 
            </p>

          </div>
          
<div style="display: flex;align-items: flex-start;gap: 20px;border-left: 8px solid var(--accent-dark);font: var(--font-paragraph-Xsmall);color: var(--dark);background: var(--white);border-bottom: 1px solid var(--grey);padding: 6px 10px;">
  <label for="n" id="input_label" style="margin: 0;">number of frames the model collects per second (between 1 and 10)</label>
  <input type="number" min="1" max="10" step="1" id="n" oninput="(validity.valid)||(value='');" value="5" onchange="myFunction()" style="margin-top: 4px;background-color: var(--grey-light);border: none;padding: 2px 5px;border-radius: 2px;">
</div>

        </div>
      </div>

      <div style="flex: 1; height: 100%; overflow-x: scroll;">
        <div id="main-body" style="display: flex;flex-direction: row;justify-content: center;width:100%;height: calc(100% - 100px);">
          <div id="main" style="display: flex; gap: 20px; align-items: flex-start; margin: 0px auto; overflow: hidden; overflow-y: scroll;">
            <video id="video2" playsinline="" style="display: none;" width="600" height="500">
              <source id="source" type="video/mp4">
            </video>
            
<!-- <video id="video" playsinline="" style="display: none;" width="600" height="500"></video>
<canvas id="output"></canvas>
<video id="video2" playsinline="" style="display: none;" muted="">
  <source id="source" type="video/mp4">
</video> -->

<div id="movingParts">
  <div id="vid" class="video">
    <canvas id="canvas" class="video"></canvas>
    <canvas id="canvasOverlay" class="video"></canvas>
  </div>
</div>

<div id="heartbeat"></div>

<div id="graphs" style="display: none;">
  <div id="rawDataGraphContainer">
    <div id="rawDataGraph" class="graph"></div>
    <p id="rawDataLabel">Change in brightness (raw video data)</p>
  </div>
  <div id="confidenceGraph" class="graph"></div>
</div>

          </div>
        </div>

        <div class="recording-bar-container">
          <div class="recording-bar">
            <div id="recording-bar-loader" class="loader"></div>
            <span id="recording-bar-message" class="loader_text">Loading model...</span>
            <div class="left">
              <input hidden id="upload_input" type="file" name="file" />
              <button id="recording-bar-upload" hidden class="button" onclick="document.getElementById('upload_input').click();">Upload Video</button>
            </div>
            <div class="center">
              <button hidden disabled id="recording-bar-tag" class="tag rounded-pill">Tag + <span id="recording-bar-tag-value" class="rounded-circle"> 0 </span> </button>
              <button hidden id="recording" class="recording"></button>
              <span hidden id="recording-bar-time" class="time_passed">00:00:00</span>
            </div>
            <div class="right">
              <button hidden id="recording-bar-summary" class="button button-outline" onclick="document.getElementById('documentation_div').hidden = false;" disabled>Overview</button>
              <div class="dropup">
                <button disabled hidden class="dropdown-toggle button" id="download" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  Download
                </button>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                  <a class="dropdown-item" id="download_video">Download Video</a>
                  <a class="dropdown-item" id="download_predictions" download="download.csv">Download Predictions</a>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div hidden id="documentation_div" class="documentation_div">
    <div id="documentation_div_2" class="documentation_div_2">
      <button id="documentation_div_cross" class="cross">â¨‰</button>
      <script>
        document.getElementById('documentation_div_cross').addEventListener("click", function() {
          document.getElementById('documentation_div').hidden = true;
        });
      </script>
      <h3 style="margin-bottom: 40px;">Overview</h3>
      
    </div>
  </div>

  <script src="/static/pulse/js/main/tools-run.js"></script>
   <script type="module" src="/static/pulse/js/tools/pulse/main.js"></script> 
  <link rel="stylesheet" href="/static/pulse/css/gui.css" />

  <!--  -->
  
<script type="text/javascript">
  // ** USER INTERFACE **
  // jQuery provides functionality for animation
  // and basic UI

  $("#minToggle").click(function() {
    if ($("#minToggle").html() == "Minimize Video") {
      minimizeVideo();
    } else {
      maximizeVideo();
    }
  });

  $("#blurToggle").click(function() {
    $("#canvas").toggleClass("blur");
    $("#border").toggleClass("border");

    var html = $("#blurToggle").html()

    if ($("#blurToggle").html() == "Fade Video") {
      $("#blurToggle").html("Focus Video");
    } else {
      $("#blurToggle").html("Fade Video");
    }
  });

  $("#end_camera").click(function() {
    if ($("#end_camera").html() == "Pause Camera") {
      $("#end_camera").html("Restart Camera");
    } else {
      $("#end_camera").html("Pause Camera");
    }
  });
</script>

<!-- <script>
  let upload_input = document.getElementById('upload_input');
  upload_input.onchange = async function() {
    camera.pause();
    upload_video.init();
  }
</script> -->


  <!-- Bootstrap -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>
</body>

</html>